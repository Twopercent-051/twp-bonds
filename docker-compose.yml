services:

  redis:
    image: redis:7
    container_name: wb_app_redis
    restart: unless-stopped
    volumes:
      - redis_data:/data

  bot:
    image: my_bonds_bot
    container_name: my_bonds_bot
    stop_signal: SIGINT
    build:
      context: .
    logging:
      options:
        max-file: "5"
        max-size: "3m"
    command: python3 -m app
    restart: unless-stopped
    ports:
       - "${OUTER_PORT}:${INNER_PORT}"
    environment:
      - ".env"

volumes:
  - redis_data: